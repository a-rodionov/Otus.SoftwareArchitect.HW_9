Распределенная транзакция реализована с использованием хореографической саги.
Так как ошибка на любом шаге выполнения должна приводить к откату всех ранее
выполненных изменений, то не существует поворотной и повторяющихся транзакций.
При создании нового заказа сервис Order отправляет сообщение OrderCreated,
которое получают все оставльные сервисы, каждый из которых кэширует необходимую
лишь для него информацию о заказе. Далее начинает выполняться хореографическая сага.
Сообщение об успешной обработке заказа обрабатываются последующим сервисом в 
цепочке из сервисов. При получении сообщения об успешной обработке заказа от
последнего сервиса в цепочке сервис Order отмечает заказ как успешно обработанный.
При возникновении ошибки на любом из этапов обработки заказа отправляется
соответствующее сообщение, которое обрабатывается предыдущем сервисом в цепочке
сервисов. При получении сообщения об ошибке каждый сервис откатывает ранее примененные
изменения и отправляет собственное сообщение об ошибке. Сервис Order при получении
сообщения об ошибке от первого сервиса в цепочке отмечает заказ как обработанный с ошибкой.
Чтобы проинформировать сервисы, до которых цепочка обработки не дошла, об отказе в
обработке заказа, сервис Order отправляет сообщение OrderCanceled.

Step | Service | Message for transaction | Message for compensation tansaction
--- | --- | --- | ---
1 | order | - *(created by input request)* | WarehouseOrderNotReserved
2 | warehouse | OrderCreated | OrderCanceled, ShippingOrderNotReserved
3 | shipping | WarehouseOrderReserved | OrderCanceled, BillingOrderNotReserved
4 | billing | ShippingOrderReserved | OrderCanceled
4 | order | BillingOrderReserved | 

## Инструкция по утсановке и тестированию

1. Выполнить скрипт создания namespace и установки helm charts - deploy.sh.

2. Запустить тест с помощью команды ниже. Задержка добавлена, чтобы у сервисов было время на передачу и обработку сообщений.
newman run ./tests/Otus.SoftwareArchitect.HW9.Test.postman_collection.json --delay-request 700
